<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Preliminary Study</title>

<script src="site_libs/header-attrs-2.24/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="Introduction.html">Introduction</a>
</li>
<li>
  <a href="Datasets.html">Data</a>
</li>
<li>
  <a href="preliminary_study.html">Preliminary Analysis</a>
</li>
<li>
  <a href="EDA.html">EDA</a>
</li>
<li>
  <a href="regression_model.html">Regression</a>
</li>
<li>
  <a href="conclusion.html">Conclusion</a>
</li>
<li>
  <a href="https://cynthia-1688.shinyapps.io/p8105_mortality_Rshiny/#section-vital-sign">Shiny App</a>
</li>
<li>
  <a href="project_report.html">Report</a>
</li>
<li>
  <a href="https://github.com/candicejiaruiyu/p8105_mortality.github.io">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Preliminary Study</h1>

</div>


<pre class="r"><code>library(tidyverse)
library(modelr)
library(purrr)
library(corrplot)
library(FactoMineR)
library(factoextra)
library(rpart)
library(rpart.plot)
library(randomForest)
library(party)
library(plotly)

set.seed(1)</code></pre>
 
<div id="correlation-between-vital-signs" class="section level2">
<h2>1. Correlation between Vital Signs</h2>
<pre class="r"><code>#show correlation
corrplot(cor(sign_tidy |&gt; select(-outcome)), type = &quot;upper&quot;, diag = FALSE)</code></pre>
<p><img src="preliminary_study_files/figure-html/unnamed-chunk-2-1.png" width="960" /></p>
<p>The correlation plot illustrates the relationships between vital
signs pairwise. Darker colors indicate stronger correlations, where blue
signifies positive correlations and red signifies negative ones.</p>
<p>Strong positive correlations were observed between variables such as
<code>rbc</code> and <code>hematocrit</code>, <code>mcv</code> and
<code>mch</code>, <code>inr</code> and <code>pt</code>,
<code>pco2</code> and <code>bicarbonate</code>. Conversely, a strong
negative correlation was found between <code>neutrophils</code> and
<code>lymphocyte</code>. Strong positive correlations often suggest the
potential for dimension reduction by merging these variables during
selection.</p>
 
</div>
<div id="cart-and-rf-dimension-reduction-and-core-variables-analysis"
class="section level2">
<h2>2. CART and rf: Dimension Reduction and Core Variables Analysis</h2>
 
<div id="analysis-of-patient-compllications-variables"
class="section level3">
<h3>2.1 Analysis of Patient Compllications Variables</h3>
<pre class="r"><code>#decision tree for complications
tree_com = ctree(outcome ~ ., data = com_tidy)
plot(tree_com)</code></pre>
<p><img src="preliminary_study_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>The decision tree employed variables <code>renal_failure</code> and
<code>atrialfibrillation</code> to predict the outcome, showing strong
evidence (p&lt;0.05) for selecting these two variables.</p>
<p>However, the probability distribution at the nodes suggests that this
decision-making approach might not be sufficiently reliable. This could
be due to the similar effects of each variable, making it challenging to
determine the next variable for refining the decision. Alternatively, it
might indicate insufficient evidence to support the selection of other
variables (p-values not meeting the criteria).</p>
<p>Furthermore, the binary nature of these patient complications
variables posed certain challenges in constructing the classification
tree, making characteristics of the variables hard to analyze.</p>
<pre class="r"><code>#random forest for complications
rf_com = randomForest(outcome ~ ., data = com_tidy)
importance(rf_com) |&gt; 
  as.data.frame() |&gt; 
  arrange(-MeanDecreaseGini) |&gt; 
  head(8) |&gt; 
  knitr::kable(digits = 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">MeanDecreaseGini</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">hyperlipemia</td>
<td align="right">5.552</td>
</tr>
<tr class="even">
<td align="left">atrialfibrillation</td>
<td align="right">5.391</td>
</tr>
<tr class="odd">
<td align="left">renal_failure</td>
<td align="right">4.855</td>
</tr>
<tr class="even">
<td align="left">deficiencyanemias</td>
<td align="right">4.700</td>
</tr>
<tr class="odd">
<td align="left">diabetes</td>
<td align="right">3.871</td>
</tr>
<tr class="even">
<td align="left">chd_with_no_mi</td>
<td align="right">3.851</td>
</tr>
<tr class="odd">
<td align="left">hypertensive</td>
<td align="right">3.707</td>
</tr>
<tr class="even">
<td align="left">depression</td>
<td align="right">3.645</td>
</tr>
</tbody>
</table>
<pre class="r"><code>varImpPlot(rf_com)</code></pre>
<p><img src="preliminary_study_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>The random forest yielded a list of variables ranked by their
importance based on <code>mean decrease in Gini index</code>, a
parameter calculated by assessing the influence of variables on the
nodes of the classification tree.</p>
<p>In descending order of importance, the top 5 variables are:
<code>hyperlipemia</code>, <code>atrialfibrillation</code>,
<code>renal_failure</code>, <code>deficiencyanemias</code>,
<code>diabetes</code>.</p>
 
</div>
<div id="analysis-of-patient-vital-signs-variables"
class="section level3">
<h3>2.2 Analysis of Patient Vital Signs Variables</h3>
<pre class="r"><code>#decision tree for vital signs
tree_sign_r = rpart(outcome ~ ., data = sign_tidy, method = &quot;class&quot;, control = rpart.control(cp = 0.02))
print(tree_sign_r)</code></pre>
<pre><code>## n= 1176 
## 
## node), split, n, loss, yval, (yprob)
##       * denotes terminal node
## 
##  1) root 1176 159 Alive (0.86479592 0.13520408)  
##    2) anion_gap&lt; 16.92121 1051 108 Alive (0.89724072 0.10275928)  
##      4) blood_calcium&gt;=7.837088 933  75 Alive (0.91961415 0.08038585) *
##      5) blood_calcium&lt; 7.837088 118  33 Alive (0.72033898 0.27966102)  
##       10) lactic_acid&lt; 2.606667 101  21 Alive (0.79207921 0.20792079) *
##       11) lactic_acid&gt;=2.606667 17   5 Death (0.29411765 0.70588235) *
##    3) anion_gap&gt;=16.92121 125  51 Alive (0.59200000 0.40800000)  
##      6) bicarbonate&gt;=19.68333 87  24 Alive (0.72413793 0.27586207)  
##       12) respiratory_rate&lt; 22.4221 47   5 Alive (0.89361702 0.10638298) *
##       13) respiratory_rate&gt;=22.4221 40  19 Alive (0.52500000 0.47500000)  
##         26) lymphocyte&gt;=10.25 17   3 Alive (0.82352941 0.17647059) *
##         27) lymphocyte&lt; 10.25 23   7 Death (0.30434783 0.69565217) *
##      7) bicarbonate&lt; 19.68333 38  11 Death (0.28947368 0.71052632) *</code></pre>
<pre class="r"><code>rpart.plot(tree_sign_r)</code></pre>
<p><img src="preliminary_study_files/figure-html/unnamed-chunk-5-1.png" width="960" /></p>
<pre class="r"><code>tree_sign_c = ctree(outcome ~ ., data = sign_tidy)
plot(tree_sign_c)</code></pre>
<p><img src="preliminary_study_files/figure-html/unnamed-chunk-5-2.png" width="960" /></p>
<p>The analysis of continuous variables related to vital signs resulted
in the successful establishment of classification criteria by the
decision tree, incorporating a total of 7 variables. It formed a 4-level
classification structure with reasonably distributed probabilities
across nodes.</p>
<p>The primary level classification variable is <code>anion_gap</code>.
The secondary level classification variables are
<code>blood_calcium</code>, <code>bicarbonate</code>. The tertiary level
classification variables are <code>lactic_acid</code>,
<code>leucocyte</code>, <code>respiratory_rate</code>. The forth level
classification variable is <code>pt</code>.</p>
<pre class="r"><code>#random forest for vital signs
rf_sign = randomForest(outcome ~ ., data = sign_tidy)
importance(rf_sign) |&gt; 
  as.data.frame() |&gt; 
  arrange(-MeanDecreaseGini) |&gt; 
  head(8) |&gt; 
  knitr::kable(digits = 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">MeanDecreaseGini</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">anion_gap</td>
<td align="right">13.770</td>
</tr>
<tr class="even">
<td align="left">bicarbonate</td>
<td align="right">13.580</td>
</tr>
<tr class="odd">
<td align="left">lactic_acid</td>
<td align="right">12.400</td>
</tr>
<tr class="even">
<td align="left">lymphocyte</td>
<td align="right">11.767</td>
</tr>
<tr class="odd">
<td align="left">leucocyte</td>
<td align="right">10.877</td>
</tr>
<tr class="even">
<td align="left">urine_output</td>
<td align="right">10.679</td>
</tr>
<tr class="odd">
<td align="left">blood_calcium</td>
<td align="right">10.481</td>
</tr>
<tr class="even">
<td align="left">platelets</td>
<td align="right">9.689</td>
</tr>
</tbody>
</table>
<pre class="r"><code>varImpPlot(rf_sign)</code></pre>
<p><img src="preliminary_study_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Ranked by the <code>mean decrease gini</code>, the top 5 variables
are: <code>anion_gap</code>, <code>bicarbonate</code>,
<code>lactic_acid</code>, <code>lymphocyte</code>,
<code>leucocyte</code>.</p>
<p>The results obtained from the random forest exhibit a overlap with
the decision tree outcomes. In fact, random forest is an extension of
decision trees that address over-fitting issues inherent in decision
tree model. Therefore, we tend to prioritize the key variables
identified by the random forest.</p>
 
</div>
</div>
<div id="pca-dimension-reduction" class="section level2">
<h2>3. PCA: Dimension Reduction</h2>
 
<div id="dimension-reduction-for-patient-vital-signs-variables"
class="section level3">
<h3>Dimension Reduction for Patient Vital Signs Variables</h3>
<pre class="r"><code>#pca using R build-in function prcomp()
#pca_res_sign = prcomp(sign_tidy |&gt; select(-outcome), scale. = TRUE)
#summary(pca_res_sign)

#pca using packages `FactoMineR`, `factoextra`
#PCA() function would do the data standardization automatically.
#keep 5 dimensions as result.
res_pca_sign = PCA(sign_tidy |&gt; select(-outcome), scale.unit = TRUE, graph = FALSE)

#`variance.percent` explains the percentage of change. 70% would be adequate.
get_eigenvalue(res_pca_sign) |&gt; 
  as.data.frame() |&gt; 
  filter(cumulative.variance.percent &lt; 61) |&gt; 
  knitr::kable(digits = 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">eigenvalue</th>
<th align="right">variance.percent</th>
<th align="right">cumulative.variance.percent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Dim.1</td>
<td align="right">3.882</td>
<td align="right">10.784</td>
<td align="right">10.784</td>
</tr>
<tr class="even">
<td align="left">Dim.2</td>
<td align="right">3.081</td>
<td align="right">8.557</td>
<td align="right">19.342</td>
</tr>
<tr class="odd">
<td align="left">Dim.3</td>
<td align="right">2.521</td>
<td align="right">7.004</td>
<td align="right">26.346</td>
</tr>
<tr class="even">
<td align="left">Dim.4</td>
<td align="right">2.356</td>
<td align="right">6.543</td>
<td align="right">32.889</td>
</tr>
<tr class="odd">
<td align="left">Dim.5</td>
<td align="right">2.217</td>
<td align="right">6.159</td>
<td align="right">39.048</td>
</tr>
<tr class="even">
<td align="left">Dim.6</td>
<td align="right">1.974</td>
<td align="right">5.485</td>
<td align="right">44.532</td>
</tr>
<tr class="odd">
<td align="left">Dim.7</td>
<td align="right">1.697</td>
<td align="right">4.713</td>
<td align="right">49.246</td>
</tr>
<tr class="even">
<td align="left">Dim.8</td>
<td align="right">1.575</td>
<td align="right">4.375</td>
<td align="right">53.621</td>
</tr>
<tr class="odd">
<td align="left">Dim.9</td>
<td align="right">1.394</td>
<td align="right">3.871</td>
<td align="right">57.492</td>
</tr>
<tr class="even">
<td align="left">Dim.10</td>
<td align="right">1.258</td>
<td align="right">3.494</td>
<td align="right">60.986</td>
</tr>
</tbody>
</table>
<p>The <code>eigenvalue</code> connects with the amount of data variance
explained by each principal component (PC). A higher eigenvalue
indicates a greater proportion of data variance that can be explained
(<code>variance.percent</code>).</p>
<p>The PCs are arranged in descending order based on the eigenvalues,
indicating that the PCs positioned earlier correspond to the directions
with the greatest data variation.</p>
<p>Typically, we can limit the number of dimensions/PCs by controlling
the <code>cumulative.variance.percent</code>. For instance, in this
case, we aimed to explain 60% of the total data variance in the model,
resulting in the selection of 10 dimensions.</p>
<pre class="r"><code>#scree plot
#visualize the contributions of each dimension.
fviz_screeplot(res_pca_sign, addlabels = TRUE, ylim = c(0, 20))</code></pre>
<p><img src="preliminary_study_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Another approach involves examining the <strong>scree plot</strong>,
which visualizes the ability of each dimension to explain the overall
variance in the data. When the explanatory power begins to decrease and
flatten out, it suggests diminishing returns in terms of dimension
reduction. This is often considered a bottleneck point, and it’s
generally reasonable to halt operations.</p>
<p>In this instance, after introducing the third dimension, there’s a
limited change in the explanatory power as the dimensions increase. It
might be considered to select the first three dimensions for subsequent
model analysis. However, due to the relatively small absolute size of
the overall explainable variance, the cumulative explained variance of
the first three dimensions falls short of 50%. Therefore, in this case,
this approach might not be suitable.</p>
<pre class="r"><code>#result
var_sign &lt;- get_pca_var(res_pca_sign) 
var_sign$cos2 |&gt; knitr::kable(digits = 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">Dim.1</th>
<th align="right">Dim.2</th>
<th align="right">Dim.3</th>
<th align="right">Dim.4</th>
<th align="right">Dim.5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">heart_rate</td>
<td align="right">0.001</td>
<td align="right">0.004</td>
<td align="right">0.154</td>
<td align="right">0.106</td>
<td align="right">0.004</td>
</tr>
<tr class="even">
<td align="left">systolic_blood_pressure</td>
<td align="right">0.065</td>
<td align="right">0.003</td>
<td align="right">0.036</td>
<td align="right">0.001</td>
<td align="right">0.048</td>
</tr>
<tr class="odd">
<td align="left">diastolic_blood_pressure</td>
<td align="right">0.077</td>
<td align="right">0.047</td>
<td align="right">0.000</td>
<td align="right">0.207</td>
<td align="right">0.017</td>
</tr>
<tr class="even">
<td align="left">respiratory_rate</td>
<td align="right">0.001</td>
<td align="right">0.032</td>
<td align="right">0.113</td>
<td align="right">0.071</td>
<td align="right">0.006</td>
</tr>
<tr class="odd">
<td align="left">temperature</td>
<td align="right">0.033</td>
<td align="right">0.074</td>
<td align="right">0.042</td>
<td align="right">0.018</td>
<td align="right">0.003</td>
</tr>
<tr class="even">
<td align="left">sp_o2</td>
<td align="right">0.058</td>
<td align="right">0.085</td>
<td align="right">0.001</td>
<td align="right">0.003</td>
<td align="right">0.051</td>
</tr>
<tr class="odd">
<td align="left">urine_output</td>
<td align="right">0.191</td>
<td align="right">0.007</td>
<td align="right">0.001</td>
<td align="right">0.046</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left">hematocrit</td>
<td align="right">0.181</td>
<td align="right">0.174</td>
<td align="right">0.001</td>
<td align="right">0.115</td>
<td align="right">0.141</td>
</tr>
<tr class="odd">
<td align="left">rbc</td>
<td align="right">0.170</td>
<td align="right">0.389</td>
<td align="right">0.013</td>
<td align="right">0.092</td>
<td align="right">0.037</td>
</tr>
<tr class="even">
<td align="left">mch</td>
<td align="right">0.003</td>
<td align="right">0.476</td>
<td align="right">0.008</td>
<td align="right">0.032</td>
<td align="right">0.175</td>
</tr>
<tr class="odd">
<td align="left">mchc</td>
<td align="right">0.001</td>
<td align="right">0.307</td>
<td align="right">0.020</td>
<td align="right">0.116</td>
<td align="right">0.086</td>
</tr>
<tr class="even">
<td align="left">mcv</td>
<td align="right">0.003</td>
<td align="right">0.286</td>
<td align="right">0.037</td>
<td align="right">0.001</td>
<td align="right">0.122</td>
</tr>
<tr class="odd">
<td align="left">rdw</td>
<td align="right">0.114</td>
<td align="right">0.060</td>
<td align="right">0.014</td>
<td align="right">0.024</td>
<td align="right">0.216</td>
</tr>
<tr class="even">
<td align="left">leucocyte</td>
<td align="right">0.055</td>
<td align="right">0.041</td>
<td align="right">0.213</td>
<td align="right">0.000</td>
<td align="right">0.037</td>
</tr>
<tr class="odd">
<td align="left">platelets</td>
<td align="right">0.012</td>
<td align="right">0.052</td>
<td align="right">0.078</td>
<td align="right">0.008</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">neutrophils</td>
<td align="right">0.020</td>
<td align="right">0.019</td>
<td align="right">0.280</td>
<td align="right">0.251</td>
<td align="right">0.221</td>
</tr>
<tr class="odd">
<td align="left">basophils</td>
<td align="right">0.014</td>
<td align="right">0.002</td>
<td align="right">0.103</td>
<td align="right">0.121</td>
<td align="right">0.094</td>
</tr>
<tr class="even">
<td align="left">lymphocyte</td>
<td align="right">0.049</td>
<td align="right">0.016</td>
<td align="right">0.303</td>
<td align="right">0.230</td>
<td align="right">0.203</td>
</tr>
<tr class="odd">
<td align="left">pt</td>
<td align="right">0.079</td>
<td align="right">0.138</td>
<td align="right">0.027</td>
<td align="right">0.004</td>
<td align="right">0.109</td>
</tr>
<tr class="even">
<td align="left">inr</td>
<td align="right">0.078</td>
<td align="right">0.135</td>
<td align="right">0.024</td>
<td align="right">0.004</td>
<td align="right">0.106</td>
</tr>
<tr class="odd">
<td align="left">nt_pro_bnp</td>
<td align="right">0.307</td>
<td align="right">0.010</td>
<td align="right">0.014</td>
<td align="right">0.000</td>
<td align="right">0.004</td>
</tr>
<tr class="even">
<td align="left">creatine_kinase</td>
<td align="right">0.004</td>
<td align="right">0.001</td>
<td align="right">0.020</td>
<td align="right">0.012</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left">creatinine</td>
<td align="right">0.325</td>
<td align="right">0.016</td>
<td align="right">0.201</td>
<td align="right">0.001</td>
<td align="right">0.049</td>
</tr>
<tr class="even">
<td align="left">urea_nitrogen</td>
<td align="right">0.424</td>
<td align="right">0.037</td>
<td align="right">0.117</td>
<td align="right">0.018</td>
<td align="right">0.081</td>
</tr>
<tr class="odd">
<td align="left">glucose</td>
<td align="right">0.002</td>
<td align="right">0.026</td>
<td align="right">0.002</td>
<td align="right">0.001</td>
<td align="right">0.032</td>
</tr>
<tr class="even">
<td align="left">blood_potassium</td>
<td align="right">0.110</td>
<td align="right">0.066</td>
<td align="right">0.143</td>
<td align="right">0.001</td>
<td align="right">0.023</td>
</tr>
<tr class="odd">
<td align="left">blood_sodium</td>
<td align="right">0.044</td>
<td align="right">0.017</td>
<td align="right">0.000</td>
<td align="right">0.088</td>
<td align="right">0.002</td>
</tr>
<tr class="even">
<td align="left">blood_calcium</td>
<td align="right">0.056</td>
<td align="right">0.064</td>
<td align="right">0.102</td>
<td align="right">0.006</td>
<td align="right">0.111</td>
</tr>
<tr class="odd">
<td align="left">chloride</td>
<td align="right">0.043</td>
<td align="right">0.173</td>
<td align="right">0.063</td>
<td align="right">0.004</td>
<td align="right">0.045</td>
</tr>
<tr class="even">
<td align="left">anion_gap</td>
<td align="right">0.471</td>
<td align="right">0.042</td>
<td align="right">0.009</td>
<td align="right">0.147</td>
<td align="right">0.068</td>
</tr>
<tr class="odd">
<td align="left">magnesium_ion</td>
<td align="right">0.043</td>
<td align="right">0.019</td>
<td align="right">0.043</td>
<td align="right">0.006</td>
<td align="right">0.104</td>
</tr>
<tr class="even">
<td align="left">ph</td>
<td align="right">0.036</td>
<td align="right">0.019</td>
<td align="right">0.086</td>
<td align="right">0.030</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">bicarbonate</td>
<td align="right">0.497</td>
<td align="right">0.057</td>
<td align="right">0.053</td>
<td align="right">0.134</td>
<td align="right">0.004</td>
</tr>
<tr class="even">
<td align="left">lactic_acid</td>
<td align="right">0.092</td>
<td align="right">0.051</td>
<td align="right">0.038</td>
<td align="right">0.154</td>
<td align="right">0.007</td>
</tr>
<tr class="odd">
<td align="left">pco2</td>
<td align="right">0.191</td>
<td align="right">0.066</td>
<td align="right">0.163</td>
<td align="right">0.217</td>
<td align="right">0.004</td>
</tr>
<tr class="even">
<td align="left">ef</td>
<td align="right">0.034</td>
<td align="right">0.072</td>
<td align="right">0.000</td>
<td align="right">0.089</td>
<td align="right">0.005</td>
</tr>
</tbody>
</table>
<p>In a factor map, a higher <code>cos2</code> value close to 1
indicates a stronger relationship between the variable and the principal
component, signifying higher quality.</p>
<pre class="r"><code>#shows the quality of variables.
corrplot(var_sign$cos2, is.corr = FALSE)</code></pre>
<p><img src="preliminary_study_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>The correlation plot visualizes the indicator <code>cos2</code>,
representing the variable-PC correlation. The model selected 5
dimensions for plotting the correlation map.</p>
<p>For <code>dim.1</code>, the variable with the highest correlation are
<code>bicarbonate</code>, <code>anion_gap</code>,
<code>urea_nitrogen</code>. For <code>dim.2</code>, the variable with
the highest correlation are <code>mch</code>, <code>rbc</code>.</p>
<pre class="r"><code>#result
var_sign$contrib |&gt; knitr::kable(digits = 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">Dim.1</th>
<th align="right">Dim.2</th>
<th align="right">Dim.3</th>
<th align="right">Dim.4</th>
<th align="right">Dim.5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">heart_rate</td>
<td align="right">0.013</td>
<td align="right">0.120</td>
<td align="right">6.111</td>
<td align="right">4.512</td>
<td align="right">0.171</td>
</tr>
<tr class="even">
<td align="left">systolic_blood_pressure</td>
<td align="right">1.683</td>
<td align="right">0.085</td>
<td align="right">1.435</td>
<td align="right">0.049</td>
<td align="right">2.179</td>
</tr>
<tr class="odd">
<td align="left">diastolic_blood_pressure</td>
<td align="right">1.992</td>
<td align="right">1.541</td>
<td align="right">0.009</td>
<td align="right">8.800</td>
<td align="right">0.763</td>
</tr>
<tr class="even">
<td align="left">respiratory_rate</td>
<td align="right">0.020</td>
<td align="right">1.046</td>
<td align="right">4.466</td>
<td align="right">3.019</td>
<td align="right">0.292</td>
</tr>
<tr class="odd">
<td align="left">temperature</td>
<td align="right">0.841</td>
<td align="right">2.400</td>
<td align="right">1.682</td>
<td align="right">0.769</td>
<td align="right">0.130</td>
</tr>
<tr class="even">
<td align="left">sp_o2</td>
<td align="right">1.484</td>
<td align="right">2.759</td>
<td align="right">0.040</td>
<td align="right">0.109</td>
<td align="right">2.314</td>
</tr>
<tr class="odd">
<td align="left">urine_output</td>
<td align="right">4.925</td>
<td align="right">0.213</td>
<td align="right">0.049</td>
<td align="right">1.950</td>
<td align="right">0.026</td>
</tr>
<tr class="even">
<td align="left">hematocrit</td>
<td align="right">4.668</td>
<td align="right">5.635</td>
<td align="right">0.029</td>
<td align="right">4.878</td>
<td align="right">6.339</td>
</tr>
<tr class="odd">
<td align="left">rbc</td>
<td align="right">4.380</td>
<td align="right">12.633</td>
<td align="right">0.506</td>
<td align="right">3.893</td>
<td align="right">1.682</td>
</tr>
<tr class="even">
<td align="left">mch</td>
<td align="right">0.075</td>
<td align="right">15.466</td>
<td align="right">0.303</td>
<td align="right">1.374</td>
<td align="right">7.883</td>
</tr>
<tr class="odd">
<td align="left">mchc</td>
<td align="right">0.013</td>
<td align="right">9.960</td>
<td align="right">0.789</td>
<td align="right">4.920</td>
<td align="right">3.864</td>
</tr>
<tr class="even">
<td align="left">mcv</td>
<td align="right">0.076</td>
<td align="right">9.275</td>
<td align="right">1.459</td>
<td align="right">0.023</td>
<td align="right">5.521</td>
</tr>
<tr class="odd">
<td align="left">rdw</td>
<td align="right">2.933</td>
<td align="right">1.934</td>
<td align="right">0.564</td>
<td align="right">1.005</td>
<td align="right">9.736</td>
</tr>
<tr class="even">
<td align="left">leucocyte</td>
<td align="right">1.418</td>
<td align="right">1.322</td>
<td align="right">8.445</td>
<td align="right">0.000</td>
<td align="right">1.654</td>
</tr>
<tr class="odd">
<td align="left">platelets</td>
<td align="right">0.298</td>
<td align="right">1.672</td>
<td align="right">3.096</td>
<td align="right">0.319</td>
<td align="right">0.010</td>
</tr>
<tr class="even">
<td align="left">neutrophils</td>
<td align="right">0.524</td>
<td align="right">0.627</td>
<td align="right">11.087</td>
<td align="right">10.640</td>
<td align="right">9.978</td>
</tr>
<tr class="odd">
<td align="left">basophils</td>
<td align="right">0.367</td>
<td align="right">0.052</td>
<td align="right">4.084</td>
<td align="right">5.147</td>
<td align="right">4.259</td>
</tr>
<tr class="even">
<td align="left">lymphocyte</td>
<td align="right">1.255</td>
<td align="right">0.518</td>
<td align="right">12.006</td>
<td align="right">9.758</td>
<td align="right">9.150</td>
</tr>
<tr class="odd">
<td align="left">pt</td>
<td align="right">2.028</td>
<td align="right">4.490</td>
<td align="right">1.077</td>
<td align="right">0.163</td>
<td align="right">4.911</td>
</tr>
<tr class="even">
<td align="left">inr</td>
<td align="right">2.004</td>
<td align="right">4.388</td>
<td align="right">0.958</td>
<td align="right">0.180</td>
<td align="right">4.800</td>
</tr>
<tr class="odd">
<td align="left">nt_pro_bnp</td>
<td align="right">7.905</td>
<td align="right">0.310</td>
<td align="right">0.536</td>
<td align="right">0.002</td>
<td align="right">0.182</td>
</tr>
<tr class="even">
<td align="left">creatine_kinase</td>
<td align="right">0.115</td>
<td align="right">0.032</td>
<td align="right">0.790</td>
<td align="right">0.514</td>
<td align="right">0.038</td>
</tr>
<tr class="odd">
<td align="left">creatinine</td>
<td align="right">8.359</td>
<td align="right">0.513</td>
<td align="right">7.957</td>
<td align="right">0.058</td>
<td align="right">2.215</td>
</tr>
<tr class="even">
<td align="left">urea_nitrogen</td>
<td align="right">10.911</td>
<td align="right">1.194</td>
<td align="right">4.637</td>
<td align="right">0.755</td>
<td align="right">3.650</td>
</tr>
<tr class="odd">
<td align="left">glucose</td>
<td align="right">0.060</td>
<td align="right">0.857</td>
<td align="right">0.088</td>
<td align="right">0.025</td>
<td align="right">1.430</td>
</tr>
<tr class="even">
<td align="left">blood_potassium</td>
<td align="right">2.833</td>
<td align="right">2.133</td>
<td align="right">5.691</td>
<td align="right">0.038</td>
<td align="right">1.030</td>
</tr>
<tr class="odd">
<td align="left">blood_sodium</td>
<td align="right">1.124</td>
<td align="right">0.541</td>
<td align="right">0.003</td>
<td align="right">3.746</td>
<td align="right">0.101</td>
</tr>
<tr class="even">
<td align="left">blood_calcium</td>
<td align="right">1.435</td>
<td align="right">2.062</td>
<td align="right">4.035</td>
<td align="right">0.264</td>
<td align="right">4.985</td>
</tr>
<tr class="odd">
<td align="left">chloride</td>
<td align="right">1.120</td>
<td align="right">5.627</td>
<td align="right">2.504</td>
<td align="right">0.167</td>
<td align="right">2.051</td>
</tr>
<tr class="even">
<td align="left">anion_gap</td>
<td align="right">12.132</td>
<td align="right">1.376</td>
<td align="right">0.375</td>
<td align="right">6.224</td>
<td align="right">3.050</td>
</tr>
<tr class="odd">
<td align="left">magnesium_ion</td>
<td align="right">1.113</td>
<td align="right">0.606</td>
<td align="right">1.704</td>
<td align="right">0.274</td>
<td align="right">4.710</td>
</tr>
<tr class="even">
<td align="left">ph</td>
<td align="right">0.921</td>
<td align="right">0.624</td>
<td align="right">3.419</td>
<td align="right">1.254</td>
<td align="right">0.012</td>
</tr>
<tr class="odd">
<td align="left">bicarbonate</td>
<td align="right">12.803</td>
<td align="right">1.852</td>
<td align="right">2.106</td>
<td align="right">5.675</td>
<td align="right">0.174</td>
</tr>
<tr class="even">
<td align="left">lactic_acid</td>
<td align="right">2.381</td>
<td align="right">1.643</td>
<td align="right">1.512</td>
<td align="right">6.546</td>
<td align="right">0.304</td>
</tr>
<tr class="odd">
<td align="left">pco2</td>
<td align="right">4.918</td>
<td align="right">2.154</td>
<td align="right">6.449</td>
<td align="right">9.191</td>
<td align="right">0.188</td>
</tr>
<tr class="even">
<td align="left">ef</td>
<td align="right">0.875</td>
<td align="right">2.341</td>
<td align="right">0.000</td>
<td align="right">3.760</td>
<td align="right">0.219</td>
</tr>
</tbody>
</table>
<p>The <code>var$contrib</code> provides the contribution magnitude of
variables to each PC. Subsequently, visualizations can be generated
based on the contribution values of variables to PCs. However, due to
limitations in two-dimensional plotting, typically only the first two
dimensions can be visualized.</p>
<pre class="r"><code>#shows the contribution in different dimensions.
corrplot(var_sign$contrib, is.corr = FALSE)</code></pre>
<p><img src="preliminary_study_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>Correlation plot can draw emphasis on the highest contribution
variables in each dimension.</p>
<pre class="r"><code>fviz_contrib(res_pca_sign, choice = &quot;var&quot;, axes = 1, top = 10)</code></pre>
<p><img src="preliminary_study_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<pre class="r"><code>fviz_contrib(res_pca_sign, choice = &quot;var&quot;, axes = 1:5, top = 10)</code></pre>
<p><img src="preliminary_study_files/figure-html/unnamed-chunk-13-2.png" width="672" /></p>
<p>Generate bar charts displaying the contribution magnitude for each
dimension, with a red dashed line indicating the expected average
contribution.For a given PC, if a variable’s contribution exceeds this
threshold, it can be considered important within that PC or group of
PCs.</p>
<pre class="r"><code>#based on above results (`var_com$coord`)
#basically,
#(a) positive correlated variables are grouped together,
#(b) negative correlated variables are located on opposite sides of the origin,
#(c) the distance between the variable and the origin measures the quality of the variable. Variables that are far from the origin are well represented.
fviz_pca_var(res_pca_sign, col.var = &quot;contrib&quot;, gradient.cols = c(&quot;#00AFBB&quot;, &quot;#E7B800&quot;, &quot;#FC4E07&quot;))</code></pre>
<p><img src="preliminary_study_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>We’ve created visualizations showcasing the importance of variables
concerning the two most significant dimensions.</p>
<p><code>cos2</code> is used to assess the variables’ importance,
represented by the distance between the arrow endpoint and the origin of
the plot. Variables closer to the correlation circle with r=1 indicate
higher representation on the factor map, signifying greater importance.
Variables closer to the center of the plot are less important for the
selected principal components.</p>
<p>Additionally, variables with larger contributions can be highlighted
on the correlation plot by coloring them based on the values from
<code>var_sign$contrib</code>.</p>
<pre class="r"><code>#colored individuals
fviz_pca_ind(res_pca_sign,
             geom.ind = &quot;point&quot;,
             col.ind = as.character(sign_tidy$outcome),
             palette = c(&quot;#00AFBB&quot;, &quot;#FC4E07&quot;),
             addEllipses = TRUE,
             legend.title = &quot;Groups&quot;)</code></pre>
<p><img src="preliminary_study_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>Based on the outcome (<code>Alive</code> or <code>Death</code>), the
data points were grouped and color-coded accordingly. Ellipses were
generated to encapsulate the sample points for different groups (alive
and death), showcasing the analysis using the two principal
components.</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
